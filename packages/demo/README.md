# Schema JSON Patch Demo

这是一个用于演示 Schema JSON Patch 功能的交互式应用。

## 功能特性

### 🚀 核心功能

- **Schema 定义**: 定义数据模型结构
- **JSON 编辑**: 编辑源JSON和目标JSON数据
- **补丁生成**: 自动生成JSON补丁
- **冲突检测**: 智能检测补丁冲突
- **冲突解决**: 可视化冲突解决界面
- **结果预览**: 查看补丁应用结果

### 💾 数据持久化

- **自动保存**: 所有输入数据自动保存到localStorage
- **数据恢复**: 刷新页面后数据自动恢复
- **状态保持**: 记住当前标签页和编辑状态
- **防抖优化**: 避免频繁保存，提升性能
- **数据管理**: 可随时清除保存的数据

## 使用方法

### 1. 定义数据模型

在"数据模型"标签页中定义您的数据结构，包括：

- 数据类型（数组、对象等）
- 主键字段
- 字段类型和约束

### 2. 编辑JSON数据

在"JSON编辑"标签页中：

- 输入源JSON数据
- 添加多个目标JSON版本
- 支持JSON格式化和压缩

### 3. 生成补丁

点击"生成补丁"按钮，系统将：

- 分析源JSON和目标JSON的差异
- 生成符合Schema的JSON补丁
- 显示补丁预览

### 4. 解决冲突

如果检测到冲突：

- 查看冲突详情
- 选择解决方案
- 自定义冲突解决
- 应用解决方案

### 5. 查看结果

在"应用结果"标签页中查看：

- 源数据
- 应用补丁后的结果
- 数据对比

## 数据自动保存

### ✨ 自动保存特性

- **实时保存**: 输入时自动保存到本地存储
- **智能防抖**: 500ms防抖延迟，避免频繁保存
- **状态指示**: 显示保存状态和最后保存时间
- **数据恢复**: 页面刷新后自动恢复所有数据

### 🔧 存储管理

- **清除数据**: 点击"清除数据"标签清除所有保存的数据
- **重置工作流**: 重置按钮会清除所有数据和存储
- **示例数据**: 加载示例数据会自动保存到本地存储

## 技术实现

### 前端技术栈

- **React 19**: 使用最新的React特性
- **TypeScript**: 完整的类型安全
- **Ant Design**: 现代化的UI组件库
- **Vite**: 快速的构建工具

### 数据管理

- **Context API**: React状态管理
- **localStorage**: 本地数据持久化
- **防抖优化**: 提升保存性能
- **错误处理**: 完善的错误处理机制

## 开发说明

### 项目结构

```
src/
├── components/          # 组件目录
│   ├── JsonEditor.tsx  # JSON编辑器
│   ├── JsonPatchEditor.tsx # 补丁编辑器
│   ├── ConflictResolutionSection.tsx # 冲突解决
│   ├── DataStatusIndicator.tsx # 数据状态指示器
│   └── ...
├── context/            # 上下文管理
│   └── PatchContext.tsx # 补丁上下文
├── utils/              # 工具函数
│   ├── storage.ts      # 存储管理
│   └── jsonUtils.ts    # JSON工具
└── data/               # 示例数据
    └── sampleJsonData.ts
```

### 本地开发

```bash
# 安装依赖
pnpm install

# 启动开发服务器
pnpm dev

# 构建生产版本
pnpm build
```

## 注意事项

1. **浏览器兼容性**: 需要支持localStorage的现代浏览器
2. **数据限制**: localStorage有存储大小限制（通常5-10MB）
3. **隐私考虑**: 数据仅存储在本地，不会上传到服务器
4. **性能优化**: 使用防抖机制避免频繁保存操作

## 许可证

本项目采用 MIT 许可证。
